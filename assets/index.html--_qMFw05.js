import{_ as s,c as i,b as a,a as t,o as l}from"./app-GpZKBnvo.js";const n={};function d(h,e){return l(),i("div",null,e[0]||(e[0]=[a(`<h2 id="ğŸ“˜-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#ğŸ“˜-æ¦‚è¿°"><span>ğŸ“˜ æ¦‚è¿°</span></a></h2><p><a href="https://github.com/OpenDCAI/DataFlow/blob/main/dataflow/operators/reasoning/generate/reasoning_answer_generator.py" target="_blank" rel="noopener noreferrer">SQLVariationGenerator</a> æ˜¯ä¸€ä¸ª SQL å˜ç§ç”Ÿæˆç®—å­ï¼Œç”¨äºæ ¹æ®è¾“å…¥çš„ SQL æŸ¥è¯¢å’Œæ•°æ®åº“ç»“æ„ï¼Œè°ƒç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç”Ÿæˆå¤šç§è¯­ä¹‰ç›¸åŒä½†è¡¨è¾¾æ–¹å¼ä¸åŒçš„ SQL å˜ä½“ã€‚è¯¥ç®—å­é€šè¿‡æ•°æ®æ›¿æ¢ã€å‡½æ•°å˜æ¢ã€éš¾åº¦å˜æ¢ç­‰æ“ä½œï¼Œä¸°å¯Œ SQL æ•°æ®é›†ï¼Œå¯ç”¨äº Text2SQL æ¨¡å‹çš„è®­ç»ƒä¸è¯„ä¼°ã€‚</p><h2 id="init-å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#init-å‡½æ•°"><span><code>__init__</code>å‡½æ•°</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">def</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> __init__</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> llm_serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> LLMServingABC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">             database_manager</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> DatabaseManager</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">             num_variations</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">             prompt_template </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> None</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ):</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="initå‚æ•°è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#initå‚æ•°è¯´æ˜"><span>initå‚æ•°è¯´æ˜</span></a></h3><table><thead><tr><th style="text-align:left;">å‚æ•°å</th><th style="text-align:left;">ç±»å‹</th><th style="text-align:left;">é»˜è®¤å€¼</th><th style="text-align:left;">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>llm_serving</strong></td><td style="text-align:left;"><code>LLMServingABC</code></td><td style="text-align:left;">å¿…éœ€</td><td style="text-align:left;">å¤§è¯­è¨€æ¨¡å‹æœåŠ¡å®ä¾‹ï¼Œç”¨äºæ‰§è¡Œæ¨ç†ä¸ç”Ÿæˆã€‚</td></tr><tr><td style="text-align:left;"><strong>database_manager</strong></td><td style="text-align:left;"><code>DatabaseManager</code></td><td style="text-align:left;">å¿…éœ€</td><td style="text-align:left;">æ•°æ®åº“ç®¡ç†å™¨å®ä¾‹ï¼Œç”¨äºè·å–æ•°æ®åº“çš„ schema å’Œæ•°æ®ã€‚</td></tr><tr><td style="text-align:left;"><strong>num_variations</strong></td><td style="text-align:left;"><code>int</code></td><td style="text-align:left;"><code>10</code></td><td style="text-align:left;">é’ˆå¯¹æ¯ä¸ªåŸå§‹ SQL æŸ¥è¯¢è¦ç”Ÿæˆçš„å˜ç§æ•°é‡ã€‚</td></tr><tr><td style="text-align:left;"><strong>prompt_template</strong></td><td style="text-align:left;"><code>PromptABC</code></td><td style="text-align:left;"><code>SQLVariationGeneratorPrompt()</code></td><td style="text-align:left;">æç¤ºè¯æ¨¡æ¿å¯¹è±¡ï¼Œç”¨äºæ„å»ºç”Ÿæˆä»»åŠ¡çš„æç¤ºè¯ã€‚</td></tr></tbody></table><h3 id="promptæ¨¡æ¿è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#promptæ¨¡æ¿è¯´æ˜"><span>Promptæ¨¡æ¿è¯´æ˜</span></a></h3><table><thead><tr><th style="text-align:left;">Prompt æ¨¡æ¿åç§°</th><th style="text-align:left;">ä¸»è¦ç”¨é€”</th><th style="text-align:left;">é€‚ç”¨åœºæ™¯</th><th style="text-align:left;">ç‰¹ç‚¹è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr></tbody></table><h2 id="runå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#runå‡½æ•°"><span><code>run</code>å‡½æ•°</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">def</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> DataFlowStorage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        input_sql_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sql</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        input_db_id_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">db_id</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    ):</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å‚æ•°" tabindex="-1"><a class="header-anchor" href="#å‚æ•°"><span>å‚æ•°</span></a></h4><table><thead><tr><th style="text-align:left;">åç§°</th><th style="text-align:left;">ç±»å‹</th><th style="text-align:left;">é»˜è®¤å€¼</th><th style="text-align:left;">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>storage</strong></td><td style="text-align:left;"><code>DataFlowStorage</code></td><td style="text-align:left;">å¿…éœ€</td><td style="text-align:left;">æ•°æ®æµå­˜å‚¨å®ä¾‹ï¼Œè´Ÿè´£è¯»å–ä¸å†™å…¥æ•°æ®ã€‚</td></tr><tr><td style="text-align:left;"><strong>input_sql_key</strong></td><td style="text-align:left;"><code>str</code></td><td style="text-align:left;"><code>&quot;sql&quot;</code></td><td style="text-align:left;">è¾“å…¥åˆ—åï¼Œå¯¹åº”åŸå§‹ SQL æŸ¥è¯¢å­—æ®µã€‚</td></tr><tr><td style="text-align:left;"><strong>input_db_id_key</strong></td><td style="text-align:left;"><code>str</code></td><td style="text-align:left;"><code>&quot;db_id&quot;</code></td><td style="text-align:left;">è¾“å…¥åˆ—åï¼Œå¯¹åº”æ•°æ®åº“ ID å­—æ®µã€‚</td></tr></tbody></table><h2 id="ğŸ§ -ç¤ºä¾‹ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#ğŸ§ -ç¤ºä¾‹ç”¨æ³•"><span>ğŸ§  ç¤ºä¾‹ç”¨æ³•</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="ğŸ§¾-é»˜è®¤è¾“å‡ºæ ¼å¼-output-format" tabindex="-1"><a class="header-anchor" href="#ğŸ§¾-é»˜è®¤è¾“å‡ºæ ¼å¼-output-format"><span>ğŸ§¾ é»˜è®¤è¾“å‡ºæ ¼å¼ï¼ˆOutput Formatï¼‰</span></a></h4><p>ç®—å­ä¼šè¯»å–è¾“å…¥ <code>DataFrame</code>ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šè¿½åŠ ç”Ÿæˆçš„ SQL å˜ç§ä½œä¸ºæ–°çš„è¡Œã€‚è¾“å‡ºçš„ <code>DataFrame</code> å°†åŒ…å«æ‰€æœ‰åŸå§‹è¡Œå’Œæ–°å¢çš„å˜ç§è¡Œã€‚</p>`,16),t("table",null,[t("thead",null,[t("tr",null,[t("th",{style:{"text-align":"left"}},"å­—æ®µ"),t("th",{style:{"text-align":"left"}},"ç±»å‹"),t("th",{style:{"text-align":"left"}},"è¯´æ˜")])]),t("tbody",null,[t("tr",null,[t("td",{style:{"text-align":"left"},input_sql_key:""}),t("td",{style:{"text-align":"left"}},[t("code",null,"str")]),t("td",{style:{"text-align":"left"}},"åŸå§‹ SQL æˆ–æ¨¡å‹ç”Ÿæˆçš„ SQL å˜ç§ã€‚")]),t("tr",null,[t("td",{style:{"text-align":"left"},input_db_id_key:""}),t("td",{style:{"text-align":"left"}},[t("code",null,"str")]),t("td",{style:{"text-align":"left"}},"å¯¹åº”çš„æ•°æ®åº“ IDã€‚")])])],-1)]))}const p=s(n,[["render",d]]),k=JSON.parse('{"path":"/zh/api/operators/text2sql/generate/sqlvariationgenerator/","title":"SQLVariationGenerator","lang":"zh-CN","frontmatter":{"title":"SQLVariationGenerator","createTime":"2025/10/09 17:09:04","permalink":"/zh/api/operators/text2sql/generate/sqlvariationgenerator/"},"readingTime":{"minutes":1.37,"words":411},"git":{"createdTime":1760001305000,"updatedTime":1760001305000,"contributors":[{"name":"Hao Liang","username":"","email":"hao.liang@stu.pku.edu.cn","commits":1,"avatar":"https://gravatar.com/avatar/105bae3e8661728b9f2f5440992b04f5f28459b66a049d09b52213ce1438f6bc?d=retro"}]},"filePathRelative":"zh/notes/api/operators/text2sql/generate/SQLVariationGenerator.md","headers":[]}');export{p as comp,k as data};
